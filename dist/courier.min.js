!function(n){function e(n,e){return n&&{}.toString.call(n)==="[object "+e+"]"}n.Courier=function(){function n(n,e){var t,r=new RegExp(n);for(var u in i)t=new RegExp(o(u)),(r.exec(o(u))||t.exec(o(n)))&&e(i[u])}function t(n){i[n.box]=i[n.box].filter(function(e){return e.id!==n.id}),0===i[n.box].length&&delete i[n.box]}function r(n){return n.id="#"+Math.floor(16777215*Math.random()).toString(16),n}function o(n){return n.toString().replace(/(^\/|\/$)/g,"")}var i={};this.receive=function(n,e){var u=r({box:o(n),opener:e});return i[n]=i[n]||[],i[n].push(u),t.bind({},u)},this.send=function(t,r,o,i){var u=0,c=[];if(i=e(o,"Function")?o:i||function(){},o=e(o,"Object")?o:{throwOnMissing:!0},n(t,function(n){for(u=n.length;u--;)c.push(n[u].opener(r));i(c)}),0===c.length&&o.throwOnMissing===!0)throw"Courier: No receiver registered for '"+t+"'"},this.reset=function(){i={}}}}(window);