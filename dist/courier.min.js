"use strict";var _classCallCheck=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function n(n,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}();!function(n){function t(n){this.subscriptions[n.box]=this.subscriptions[n.box].filter(function(t){return t.id!==n.id}),0===this.subscriptions[n.box].length&&delete this.subscriptions[n.box]}function i(n){return n.id="#"+Math.floor(16777215*Math.random()).toString(16),n}function e(n){return n.toString().replace(/(^\/|\/$)/g,"")}function r(n,t){var i=[];return function(e){for(var r=e.length;r--;)i.push(e[r].opener(n));return t(i)}}function s(n,t){return n&&{}.toString.call(n)==="[object "+t+"]"}var o=function(){function n(){_classCallCheck(this,n),this.subscriptions={}}return _createClass(n,[{key:"receive",value:function(n,r){var s=i({box:e(n),opener:r});return this.subscriptions[n]=this.subscriptions[n]||[],this.subscriptions[n].push(s),t.bind(this,s)}},{key:"send",value:function(n,t,i,e){e=s(i,"Function")?i:e||function(){},i=s(i,"Object")?i:{throwOnMissing:!0},new u(this.subscriptions).withName("all",r(n,e))(!1).withName(n,r(t,e))(i.throwOnMissing)}},{key:"reset",value:function(){this.subscriptions={}}}]),n}(),u=function(){function n(t){_classCallCheck(this,n),this.subscriptions=t}return _createClass(n,[{key:"withName",value:function(n,t){var i,r=this,s=new RegExp(n),o=[];for(var u in this.subscriptions)i=new RegExp(e(u)),(s.exec(e(u))||i.exec(e(n)))&&o.push(this.subscriptions[u]);return function(i){if(0===o.length&&i===!0)throw"Courier: No receiver registered for '"+n+"'";return o.forEach(function(n){t(n)}),r}}}]),n}();n.Courier=o}(window);