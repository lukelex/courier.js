!function(n){n.Courier=function(){function n(n,e){var r,t=new RegExp(n);for(var u in o)r=new RegExp(i(u)),(t.exec(i(u))||r.exec(i(n)))&&e(o[u])}function e(n){o[n.box]=o[n.box].filter(function(e){return e.id!==n.id}),0===o[n.box].length&&delete o[n.box]}function r(n){return n.id="#"+Math.floor(16777215*Math.random()).toString(16),n}function i(n){return n.toString().replace(/(^\/|\/$)/g,"")}var o={};this.receive=function(n,t){var u=r({box:i(n),opener:t});return o[n]=o[n]||[],o[n].push(u),e.bind({},u)},this.send=function(e,r,i){var o=0,t=!1;if(i=i||{throwOnMissing:!0},n(e,function(n){for(t=!0,o=n.length;o--;)n[o].opener(r)}),!t&&i.throwOnMissing===!0)throw"Courier: No receiver registered for '"+e+"'"},this.reset=function(){o={}}}}(window);