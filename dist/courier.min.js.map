{"version":3,"sources":["courier.js"],"names":[],"mappings":"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","file":"courier.min.js","sourcesContent":["// ==========================================================================\n// Project:   Courier.js - Simple messaging engine for JavaScript\n// Copyright: Copyright 2015 Lukas Alexandre\n// License:   Licensed under MIT license\n//            See https://github.com/lukelex/courier.js/blob/master/LICENSE\n// ==========================================================================\n\n// Version: 0.5.0 | From: 22-1-2016\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Courier = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Subscription = require('./lib/Subscription');\n\nvar _Subscription2 = _interopRequireDefault(_Subscription);\n\nvar _BoxFinder = require('./lib/BoxFinder');\n\nvar _BoxFinder2 = _interopRequireDefault(_BoxFinder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction unsubscribe(subscription) {\n  this.subscriptions[subscription.box] = this.subscriptions[subscription.box].filter(function (subs) {\n    return subs.id !== subscription.id;\n  });\n\n  if (this.subscriptions[subscription.box].length === 0) {\n    delete this.subscriptions[subscription.box];\n  }\n}\n\nfunction andPassAlongThe(message, callback) {\n  var results = [];\n\n  return function (subscriptions) {\n    subscriptions.forEach(function (subscription) {\n      results.push(subscription.handler(message));\n    });\n\n    return callback(results);\n  };\n}\n\nfunction is(func, type) {\n  return func && {}.toString.call(func) === \"[object \" + type + \"]\";\n}\n\nvar Courier = function () {\n  function Courier() {\n    _classCallCheck(this, Courier);\n\n    this.subscriptions = {};\n  }\n\n  _createClass(Courier, [{\n    key: 'receive',\n    value: function receive(box, opener) {\n      var subscription = new _Subscription2.default(box, opener);\n\n      this.subscriptions[box] = this.subscriptions[box] || [];\n      this.subscriptions[box].push(subscription);\n\n      return unsubscribe.bind(this, subscription);\n    }\n  }, {\n    key: 'send',\n    value: function send(box, message, options, callback) {\n      callback = is(options, \"Function\") ? options : callback || function () {};\n      options = is(options, \"Object\") ? options : { throwOnMissing: true };\n\n      new _BoxFinder2.default(this.subscriptions).withName(\"all\", andPassAlongThe(box, callback)).dispatch(box, { throwOnMissing: false }).withName(box, andPassAlongThe(message, callback)).dispatch(box, options);\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.subscriptions = {};\n    }\n  }]);\n\n  return Courier;\n}();\n\n// Using CommonJS module exporting to prevent\n// Babel to wrap it in 'default' property of the module\n\nmodule.exports = Courier;\n\n},{\"./lib/BoxFinder\":2,\"./lib/Subscription\":4}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ReceiverIterator = require('./ReceiverIterator');\n\nvar _ReceiverIterator2 = _interopRequireDefault(_ReceiverIterator);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BoxFinder = function () {\n  function BoxFinder(subscriptions) {\n    _classCallCheck(this, BoxFinder);\n\n    this.subscriptions = subscriptions;\n  }\n\n  _createClass(BoxFinder, [{\n    key: 'withName',\n    value: function withName(box, callback) {\n      var senderPattern = new RegExp(box),\n          receiverPattern,\n          receivers = [];\n\n      for (var name in this.subscriptions) {\n        receiverPattern = new RegExp((0, _helpers.stringify)(name));\n\n        if (senderPattern.exec((0, _helpers.stringify)(name)) || receiverPattern.exec((0, _helpers.stringify)(box))) {\n          receivers.push(this.subscriptions[name]);\n        }\n      }\n\n      return new _ReceiverIterator2.default(receivers, callback, this);\n    }\n  }]);\n\n  return BoxFinder;\n}();\n\nexports.default = BoxFinder;\n\n},{\"./ReceiverIterator\":3,\"./helpers\":5}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ReceiverIterator = function () {\n  function ReceiverIterator(receivers, callback, context) {\n    _classCallCheck(this, ReceiverIterator);\n\n    this.receivers = receivers;\n    this.callback = callback;\n    this.context = context;\n  }\n\n  _createClass(ReceiverIterator, [{\n    key: \"dispatch\",\n    value: function dispatch(box, options) {\n      var _this = this;\n\n      if (this.receivers.length === 0 && options.throwOnMissing === true) {\n        throw \"Courier: No receiver registered for '\" + box + \"'\";\n      }\n\n      this.receivers.forEach(function (receiver) {\n        _this.callback(receiver);\n      });\n\n      return this.context;\n    }\n  }]);\n\n  return ReceiverIterator;\n}();\n\nexports.default = ReceiverIterator;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _helpers = require(\"./helpers\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Subscription = function Subscription(box, handler) {\n  _classCallCheck(this, Subscription);\n\n  this.id = \"#\" + Math.floor(Math.random() * 16777215).toString(16);\n  this.box = (0, _helpers.stringify)(box);\n  this.handler = handler;\n};\n\nexports.default = Subscription;\n\n},{\"./helpers\":5}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stringify = stringify;\nfunction stringify(name) {\n  return name.toString().replace(/(^\\/|\\/$)/g, \"\");\n}\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}